# prefix for for a "spatio-temporal Datacube" extension to qb
@prefix qb4st: <http://resources.opengeospatial.org/def/qbcomponents/qb4st/> .

# a canonical spatial concept ontology (update to SDW output )
# we cannot have this as a dependency until accepted as a Note or Rec - so we declare equivalence 
# @prefix so: <http://geosemweb.net/sdwgeo#> .

# a canonical time concept ontology (update to SDW output )
@prefix time: <http://www.w3.org/2006/time#> .


@prefix : <http://resources.opengeospatial.org/def/qbcomponents/qb4st> .

@prefix rdf:            <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs:           <http://www.w3.org/2000/01/rdf-schema#> .
@prefix owl:            <http://www.w3.org/2002/07/owl#> .
@prefix xsd:            <http://www.w3.org/2001/XMLSchema#> .
@prefix skos:           <http://www.w3.org/2004/02/skos/core#> .
@prefix qb:             <http://purl.org/linked-data/cube#> .
@prefix dct:        	<http://purl.org/dc/terms/> .
@prefix foaf: 			<http://xmlns.com/foaf/0.1/>.
#########################

#
# Ontology definitions - mainly to provide Linked Data resources 
#
#########################

<http://resources.opengeospatial.org/def/qbcomponents/qb4st> a owl:Ontology;
   dct:creator [ foaf:mbox  <mailto:rob@metalinkage.com.au>; foaf:name "Rob Atkinson"; ];

	dct:created "2016-10-25"^^xsd:date ;
	dct:license <https://creativecommons.org/licenses/by/4.0/> ;
	rdfs:label "QB4ST: Spatial Temporal Datacube Extensions"@en;
	dct:rights "Copyright Â© 2016 W3C All Rights Reserved. W3C liability, trademark and document use rules apply."@en ;
	rdfs:comment "QB4ST defines a minimal set of definitions for spatio-temporal properties of RDF Datacube elements and base abstract classes to allow disocvery of spatio-temporal aspects of a dataset described using RDF datacube"@en;
	# owl:imports 
	owl:versionIRI <http://www.w3.org/2006/time#2016> 
.

#########################
#
# Inheritance entailment properties 
#
#########################

# Classes
qb4st:ComponentRegister a rdfs:Class;
	rdfs:label "A Class declaration for sets of QB components"@en;
	rdfs:comment "To be extended to bind metadata and API behaviour to deployed set, as required. This is sufficient for entailment rules to make each namespace in which components are defined into a sub-register"@en;
	.

# Properties
qb4st:implements a rdfs:Property;
	rdfs:label "inherits constraints from the related object";
	owl:inverseOf qb4st:implementedBy ;
	# meta:rangeIncludes qb:ComponentProperty
	# meta:domainIncludes qb:ComponentProperty
	rdfs:comment "Unlike rdfs:subPropertyOf this preserves the path to the immediate parent - allowing inheritance to be modelled as a tree"@en ;
.

qb4st:implementsTransitive a rdfs:Property;
	rdfs:label "indirect inheritance . ";
	# meta:rangeIncludes qb:ComponentProperty
	# meta:domainIncludes qb:ComponentProperty
	rdfs:comment "Convenience handled by entailment, listing all sources of inherited properties"@en ;
.

qb4st:implementedBy a rdfs:Property;
	rdfs:label "link to implementing sub-classes";
	# meta:rangeIncludes qb:ComponentProperty
	# meta:domainIncludes qb:ComponentProperty
	owl:inverseOf qb4st:implements;
	rdfs:comment "Convenience links, generated by entailment"@en ;
.


#########################
#
# Abstract concept definitions - provides a hook for alignment with future standards for defining general spatial concepts 
#
#########################



qb4st:SpatialThing a rdfs:Class, owl:Class ;
	rdfs:label "Spatial Thing"@en ;
	rdfs:comment "This is defined here pending availability of a canonical definition of spatial concepts - at which point an equivalence will be declared"@en ;
.

qb4st:Point  a rdfs:Class, owl:Class ;
	rdfs:label "Geometric Point"@en ;
	rdfs:comment "This is defined here pending availability of a canonical definition of spatial concepts - at which point an equivalence will be declared"@en ;
.


qb4st:CRS a rdfs:Class, owl:Class ;
	rdfs:label "Coordinate Reference System"@en ;
	rdfs:comment "This is defined here pending availability of a canonical definition of spatial concepts - at which point an equivalence will be declared"@en ;
.


#########################
#
# Data Structure - defines classes to allow inferencing that a dataset with a given QB structure is in fact a spatio-temporal dataset 
#
#########################

qb4st:SpatialDSD a rdfs:Class, owl:Class;
	rdfs:subClassOf qb:DataStructureDefinition ;
	rdfs:label "Spatial Data Structure Definition"@en ;
	rdfs:comment "Specifies a data set includes one or more spatial properties, either in its organising dimension or its observed values"@en ;
	rdfs:subClassOf [
        a owl:Restriction ;
        owl:onProperty qb:component ;
        owl:someValuesFrom qb4st:SpatialComponentSpecification ;
     ]  ;
.

qb4st:SpatioTemporalDSD a rdfs:Class, owl:Class;
	rdfs:subClassOf qb4st:SpatialDSD ;
	rdfs:label "Spatial Data Structure Definition"@en ;
	rdfs:comment "Specifies a data set includes one or more spatial properties, either in its organising dimension or its observed values"@en ;
	rdfs:subClassOf [
        a owl:Restriction ;
        owl:onProperty qb:component ;
        owl:someValuesFrom qb4st:TemporalComponentSpecification ;
     ]  ;
.

qb4st:SpatialComponentSpecification a rdfs:Class, owl:Class;
	rdfs:subClassOf qb:ComponentSpecification ;
	rdfs:label "Spatial Component"@en ;
	rdfs:comment "A generalised spatial property - allows properties like CRS, bounds, accuracy and precision to be define for a spatial dimension or measure"@en ;
	rdfs:subClassOf [
        a owl:Restriction ;
        owl:onProperty qb:componentProperty;
        owl:someValuesFrom qb4st:SpatialProperty ;
     ]  ;
.

qb4st:TemporalComponentSpecification a rdfs:Class, owl:Class;
	rdfs:subClassOf qb:ComponentSpecification ;
	rdfs:label "Spatial Component"@en ;
	rdfs:comment "A generalised spatial property - allows properties like CRS, bounds, accuracy and precision to be define for a spatial dimension or measure"@en ;
	rdfs:subClassOf [
        a owl:Restriction ;
        owl:onProperty qb:componentProperty;
        owl:someValuesFrom qb4st:TemporalProperty ;
     ]  ;
.

# many not need these - unless we want to ask if a dataset has a spatial dimension vs a measure?
qb4st:SpatialDimensionComponentSpecification a rdfs:Class, owl:Class;
	rdfs:subClassOf qb:ComponentSpecification ;
	rdfs:label "Spatial Dimension Component"@en ;
	rdfs:comment "Allows identification of datasets organised using discrete spatial dimensions"@en ;
	rdfs:subClassOf [
        a owl:Restriction ;
        owl:onProperty qb:dimension;
        owl:someValuesFrom qb4st:SpatialDimension ;
     ]  ;
.

qb4st:SpatialMeasureComponentSpecification a rdfs:Class, owl:Class;
	rdfs:subClassOf qb:ComponentSpecification ;
	rdfs:label "Spatial Measure Component"@en ;
	rdfs:comment "Allows identification of datasets containing spatial location measures"@en ;
	rdfs:subClassOf [
        a owl:Restriction ;
        owl:onProperty qb:measure;
        owl:someValuesFrom qb4st:SpatialMeasure ;
     ]  ;
.

########################
#
# attributes of spatial components
#
####################### 


qb4st:srs a rdfs:Property, owl:ObjectProperty;
	# meta:rangeIncludes qb4st:SpatialProperty, qb4st:SpatialComponentSpecification;
	rdfs:label "Spatial Reference System"@en;
	rdfs:comment "Generalised Spatial Reference System - specific types may be coordinate, grid or feature based "@en
	.
	
qb4st:crs a rdfs:Property, owl:ObjectProperty;
	# meta:rangeIncludes qb4st:SpatialProperty, qb4st:SpatialComponentSpecification;
	rdfs:subPropertyOf qb4st:srs ;	
	rdfs:range qb4st:CRS;
	rdfs:label "CRS binding for a component specification or a property"@en;
	rdfs:comment "Allows declaration of a CRS for any spatial propert -- do we want to leave domain open? Leaves it to a general spatial ontology to handle if CRS is a canonical URI set , or dereferences to anything specific)"@en
	.

qb4st:crsaxis a rdfs:Property;
	# meta:rangeIncludes qb4st:SpatialProperty, qb4st:SpatialComponentSpecification;
	rdfs:subPropertyOf qb4st:srs ;	
	rdfs:label "CRS axis element name"@en;
	rdfs:comment "Names a specific axis of the CRS"@en
	.


qb4st:coordGranularity a rdfs:Property;
	rdfs:domain qb4st:coordDimension ;
	rdfs:range qb4st:AnyNumber ;
	rdfs:label "Resolution (Granularity)" ;
	rdfs:comment "Dimensions are indexes, a coordDimension specifies the granular partitioning of the coordinate space represented."@en
	.

qb4st:AnyNumber a rdfs:Class, owl:Class ;
      rdfs:label "Any number"@en ;      
      rdfs:comment "A datatype that is the union of numeric xsd data types. equivalent to the xsd specification that uses an xsd:union of memberTypes='xsd:decimal xsd:double xsd:float xsd:integer'."@en ;
      owl:equivalentClass [ 
		rdf:type  rdfs:Datatype;
		owl:unionOf (xsd:float xsd:decimal xsd:integer xsd:double) 
      ]
.
	
##################
#
# Spatial properties - things that can be embedded in data to define its spatial location
#
# note that these form the initial population for extensible registers of QB4ST compliant specialised spatio-temporal QB components.
#
##################
qb4st:SpatialProperty a rdfs:Class, owl:Class;
	rdfs:subClassOf rdfs:Property, qb:ComponentProperty ;
	rdfs:label "Abstract Spatial Property"@en ;
	rdfs:comment "A generalised spatial property - defines how properties like CRS, accuracy and precision can be applied to any spatial value in a dimension of measure"@en ;
	rdfs:subClassOf [
        a owl:Restriction ;
        owl:onProperty qb:concept ;
        owl:someValuesFrom qb4st:SpatialThing ;
     ]  ;
	 . 

qb4st:TemporalProperty a rdfs:Class, owl:Class;
	rdfs:subClassOf rdfs:Property, qb:ComponentProperty ;
	rdfs:label "Abstract Spatial Property"@en ;
	rdfs:comment "A generalised spatial property - defines how properties like CRS, accuracy and precision can be applied to any spatial value in a dimension of measure"@en ;
	rdfs:subClassOf [
        a owl:Restriction ;
        owl:onProperty qb:concept ;
        owl:someValuesFrom qb4st:SpatialThing ;
     ]  ;
	 . 
	 
qb4st:SpatialDimension a rdfs:Class, owl:Class; 
	rdfs:label "Spatial Dimension"@en ;
	rdfs:subPropertyOf qb:DimensionProperty, qb4st:SpatialProperty;
	rdfs:comment "A generalised spatial dimension - defines common usage of a concept for a spatial dimension, and hence potential transformability between instances."@en
	. 
	

qb4st:CoordDimension a rdfs:Class, owl:Class;
	rdfs:subPropertyOf qb4st:SpatialDimension;
	rdfs:label "Abstract Numerical Coordinate Dimension"@en ;
	rdfs:comment "A numeric coordinate dimension. NB - this is a dimension - an index with spatial semantics whose value represents . If an actual location is being measured, use a coordMeasure"@en;
	rdfs:range  qb4st:AnyNumber 

.

qb4st:SpatialMeasure a  rdfs:Class, owl:Class;
	rdfs:subPropertyOf qb:MeasureProperty;
	rdfs:label "abstract measure of spatial location"@en
	.

qb4st:PositionMeasure a  rdfs:Class, owl:Class ;
	rdfs:subPropertyOf qb:SpatialMeasure ;
	rdfs:label "Location by Point Coordinates"@en ;
	rdfs:range  qb4st:Point ;
	rdfs:comment "a measure of location as a Point (i.e. a complex spatial data type)"@en
	.

qb4st:CoordinateMeasure a  rdfs:Class, owl:Class ;
	rdfs:subPropertyOf qb:SpatialMeasure ;
	rdfs:label "Location partially recorded by a single Coordinate"@en ;
	rdfs:range  qb4st:AnyNumber ;
	rdfs:comment "Abstract class for partial measure of location as a single Coordinate - such as latitude"@en;
	.

qb4st:refAreaMeasure a  rdfs:Class, owl:Class ;
	rdfs:subPropertyOf qb:SpatialMeasure ;
	rdfs:range  qb4st:Feature ;
	rdfs:label "Location by spatial Feature"@en ;
	rdfs:comment "a measure of location as being with the bounds of an identified Spatial Feature"@en ;
	.
